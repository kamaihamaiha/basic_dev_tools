### Vim 编辑器使用

**有三种模式：命令模式，末行模式，编辑模式**。

#### 1. 命令模式

##### 1-0. 模式间的切换

* 命令模式 -> 末行模式： 输入 “：”
* 末行模式 -> 命令模式： 1. 按下 Esc  2. 按两下 Esc  3. 删除末行的全部命令

##### 1-1. 光标移动

* 移动到行首： ^
* 移动到行尾：$
* 移动到首行：gg
* 移动到末行：G
* 向下翻页： ctrl + b 「back」
* 向上翻页： ctrl + f  「foreword」
* 移动到某行： 数字G 或者 :数字+回车
* 以当前光标为准，向上/向下移动多行： 数字+方向键
* 以当前光标为准，向左/向右移动多列： 数字+方向键

##### 1-2. 编辑

* 删除当前一行，且下面行接着上移： dd
* 删除当前一行，且其他行保持不动： D
* 剪切： yy
* 剪切多行：数字yy。如： 3yy
* 复制： p

---

#### 2. 末行模式

* 保存

  ```shell
  #直接保存
  :w
  #另存为
  :w 路径
  ```

* 退出

  ```shell
  ：q
  ```

* 保存并推出

  ```
  :wq
  ```

* 强制操作

  ```shell
  #强制退出，刚才做的修改操作不保存
  :q!
  ```

* 调用外部命令

  ```shell
  #在当前的窗口下，突然想执行 Linux 命令。如：查看进程占用 cpu/内存 情况
  :!top
  ```

* 搜索

  ```shell
  /关键词
  #切换上/下一个结果
  N 或者 n
  #取消高亮显示
  :nohl
  ```

* 替换

  s: string

  %: 整个文档

  g: global

  ```shell
  #替换光标所在行第一处的字符
  :s/关键词/新的内容
  #替换光标所在行全部符合条件的字符
  :s/关键词/新的内容/g
  #替换光所有行第一个符合条件的字符
  :%s/关键词/新的内容
  #替换光所有行符合条件的字符
  :%s/关键词/新的内容/g
  
  ```

* 显示行号

  ```shell
  #临时显示行号
  :set nu
  #不显示行号
  :set nonu
  ```

* 扩展命令

  使用 vim 同时打开多个文件，在末行模式下进行切换文件。

  ```shell
  #1.查看当前已经打开的文件名称
  :files
  #2.切换文件方式一
  :open 文件名
  #3.切换文件方式二，通过其他命令。下一个和上一个。
  :bn
  :bp
  
  ```

  ---

#### 3. 编辑模式

**进入方式：**

* i： 在光标所在字符前开始插入
* a：在光标所在字符后开始插入
* o：在光标所在行的下面另起一新行插入
* 等等...

**退出方式：**

按下 Esc

---

#### 4. 实用功能

##### 4-1. 代码着色

* 显示： syntax on
* 不显示： syntax off

##### 4-2 vim 中的计算器

1. 进入编辑模式
2. 按下 ctrl + R，注意这个大写的 R 不要用 shift + r 代替。
3. 按下 = 
4. 输入计算内容
5. 按下 回车

---

#### 5. 扩展内容

##### 5-1 vim 的配置

有三种配置情况：

 	1. 在文件打开的时候，在末行模式下输入的配置。临时的。
 	2. 个人配置文件。（~/.vimrc），如果没有就自己创建一个。
 	3. 全局配置文件。vim自带。（/etc/vimrc）

**如果有个人配置文件，则以个人配置生效。如果没有个人配置则按照全局配置文件生效。**

##### 5-2 异常退出

断电或者直接关闭编辑软件，下次打开后会提示出错，且会有一个 .XXX.swap 处理方法就是删除这个文件。

##### 5-3 新建别名

用映射的方式定义自己特有的命令。映射文件在 ~/.bashrc

**添加方式：**

```shell
# 让 cls 执行清屏
alias cls='clear'
```

注意：必须重新登陆当前用户才可以生效。

##### 5-4 退出方式

* :q

* :wq

  如果文件没有修改，用了这个命令，则文件的修改时间会更新。

* :x

  没有修改就直接退出，这时文件修改的时间不会更新。修改了就保存然后退出。但是不是 **大写的 X！**，这个是加密文件用的。

* ZZ



